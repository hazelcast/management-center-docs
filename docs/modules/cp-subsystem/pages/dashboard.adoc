= CP Subsystem
:description: You can use the CP Subsystem menu section to manage and monitor the CP subsystem in a cluster.
:page-aliases: clusters:promoting-cp-member.adoc, clusters:removing-cp-member.adoc, clusters:restarting-cp-subsystem.adoc, clusters:cp-subsystem.adoc

You can use the *CP Subsystem* menu item to manage and monitor the xref:{page-latest-supported-hazelcast}@hazelcast:cp-subsystem:cp-subsystem.adoc[CP subsystem] in a cluster.

image:ROOT:CPSubsystemDashboard.png[Status]

== Data and Metrics

The CP subsystem dashboard displays the following tables:

.CP subsystem
[cols="20%s,80%a"]
|===
|Field|Description

|CP Members
|The number of accessible CP members and the CP member count that's configured on the cluster.

|<<promote, Promote Member to CP>>
|This button is available only to admin users.

|<<remove, Remove CP Member>>
|This button is available only to admin users.

|<<restart, Restart CP Subsystem>>
|This button is available only to admin users.
|===

.CP subsystem stats
[cols="20%s,80%a"]
|===
|Field|Description

|Member
|Address of the CP member.

|Nodes
|Number of Raft nodes that the member is running.

|Destroyed Groups
|Total number of Raft groups that have been destroyed.

|Active Members
|Total number of active CP members.

|Missing Members
|Total number of missing CP members.
|===

.CP group metrics
[cols="20%s,80%a"]
|===
|Field|Description

|Group Name
|Name of the Raft group.

|Group Id
|Group identifier.

|Member Count
|Total number of members in the group.
|===

To see more details about a particular group, click on the down arrow next to the group name.

[[session]]
.CP session metrics
[cols="20%s,80%a"]
|===
|Field|Description

|Member
|Address of the CP member

|Id
|xref:{page-latest-supported-hazelcast}@hazelcast:cp-subsystem:sessions.adoc[Session] ID.

|Endpoint Name
|The name of the client that initiated the session (only if the name is set by the client).

|Endpoint
|The address of the client that initiated the session.

|Endpoint Type
|The type of the client that initiated the session.

|Version
|The number of session heartbeats that the member has received.

|Creation Time
|Time at which the session was created. 

|Expiration Time
|Time at which the session will expire. 
|===

== Status Banner

A banner is always displayed at the top of the page with a message about the current CP subsystem status.

This banner may display one of
the following messages:

* *CP Subsystem is not enabled*: The cluster is not configured with a CP member count of at least 3.
* *All CP members are accessible*: Number of accessible CP members is at least the same as the configured CP member count.
* *One CP member is not accessible*: One
CP member is missing and the minority count in the CP subsystem is greater than 1. For example, this value is shown
when 6 accessible CP members are available and the configured count is 7. In this example, the minority
count is 3 members and the majority count is 4 members.
* *Multiple CP members are not accessible:* Multiple
CP members are missing, but their count is less than the minority.
* *Minority of the CP members are not accessible:* The minority of CP
members are missing.
* *Majority of the CP members are not accessible:* The majority of CP
members are missing.

[[promote]]
== Promoting Members to CP Members

You can promote any existing member that is not part of the CP subsystem to a CP member.

This action is available only to admin users. 

. Go to *CP Subsystem* > *Dashboard*, and click *Promote*.

. Select an AP member (one of the members that do not participate in the CP subsystem) from the dropdown.
+
NOTE: Lite members are not displayed in the dropdown list because they do not store data and cannot be promoted to CP members.

If everything goes well, a success message is displayed.

image:ROOT:CPPromoteDialog.png[Promote Member to CP Confirmation]

If an exception occurs, an error notification is displayed.

[[remove]]
== Removing CP Members

You can manually remove a disconnected CP member from the CP subsystem, using Management Center.

If a CP member loses connection with the rest of the cluster, the CP subsystem will wait for 4 hours by default before connecting to a new CP member. You can configure this time in the `missing-cp-member-auto-removal-seconds` option. See xref:{page-latest-supported-hazelcast}@hazelcast:cp-subsystem:configuration.adoc[] in the Platform documentation.

This action is available only to admin users. 

. Go to *CP Subsystem* > *Dashboard*, and click *Remove*.

. Select a CP member from the dropdown.
+
Although this member is not connected to the Management Center, it is known by
the cluster's CP subsystem. 

If everything goes well, a success message is displayed.

image:ROOT:CPRemoveDialog.png[Remove CP Member Confirmation]

If an exception occurs, an error notification is displayed.
[[restart]]
== Restarting CP Subsystem

If the majority of CP members crash, you can restart the CP subsystem to delete all CP data and trigger a new round of the discovery process.

This action is available only to admin users. 

Go to *CP Subsystem* > *Dashboard*, and click *Restart*.

If everything goes well, a success message is displayed.

If an exception occurs, an error notification is displayed.
